
JooMooWebSites.com - Upgrading Notes for 2016
---------------------------------------------
We're always changing this, so this file is mostly to keep track of
what was done the last time or two, in case we find issues, and to
give us a starting point, with appropriate cautions and tips, for
next time.

Before You Start
----------------
0. On ALL hosts: backup DB and ensure code matches what is in github
   bu jm 01-before_upgrading_3.5.0_to_3.6.0
   gojmj
   git status
   git pull
1. Decide which host to do most of the work on:
   jane - moving production to barbara, which is also running Ubuntu 16.04
       Never updated lauren last time
       May not even bother with bette this time...

Log
---
[ ] 2016-
[ ] 2016-xx-xx: 3.6.0 to 3.x.x
[ ] 2016-08-29: 3.5.1 to 3.6.0
[ ] 2016-07-03: 3.4.8 to 3.5.1
[ ] 2016-02-13: 3.4.5 to 3.4.8

 Optional (Untested - for future reference)
============================================
Not sure whether we will be able to do this, but don't want to forget
that it may be an option at some point.

New for 2016: Trying to upgrade via the admin panel (like we do for WP)
-----------------------------------------------------------------------
Installation method: Write files directly
1. Error occurred (unable to write to logs dir).
   gojmj
   chmod 775 logs/
   sudo chgrp www-data logs/
2. Message: "Download of update package failed."
   chmod 775 tmp/
   sudo chgrp www-data tmp/
3. Pop-up: "Error: Invalid login"
   Acts like it is working but I suspect it is not
   Not seeing any solutions right off the bat (and don't feel like more digging)


 2016-08-29: Notes on Upgrading From 3.5.1 to 3.6.0
====================================================
There are some major caveats in upgrading these versions!  (3.6.1 is apparently a bad release)
   https://www.joomla.org/announcements/release-news/5666-the-joomla-3-6-1-update.html
It says to "Update to Joomla! 3.6.0 through the Joomla! Update component"
   https://docs.joomla.org/J3.x:Updating_from_an_existing_version
Looks easy enough but let's do some checks first:

1. Check and fix file permissions
   System Information -> Folder Permissions
   If one or more of these is Unwritable, run these commands and recheck:
      gojmj
      ./fix_permissions.sh   # will ask for password to run sudo commands
   To get configuration.php to show up as writable, may need to:
   o  ** TEMPORARILY ** break the link and
   o  ** TEMPORARILY ** copy the file from ../gitignored
   rm configuration.php
   cp ../gitignored/configuration.php .
   sudo chgrp www-data configuration.php
   chmod 775 configuration.php
   Recheck in back end:
      System Information -> Folder Permissions
2. Trying Components -> Joomla Update
   Popup: "ERROR: Invalid login"  (getting deja vu)
   Doesn't seem to be doing anything....
2.1 Update Installer Plugin
-> Try updating the installer plugin first
   Control Panel -> (red banner) "1 Extension Update(s) are available"
   Click on "View Updates"
   Click the "Clear Cache" button
   Click the "Find Updates" button
   Check the "Installer - Install from Web" checkbox
   Click the "Update" button
   Results:
      "Warning - JInstaller: :Install: Can't find XML setup file."
      "Message - Updating plugin was successful."
   Click the "Clear Cache" button (safety check)
   Click the "Find Updates" button
   Results:
      "No updates available"
2.2 Try again
   Trying Components -> Joomla Update
   Click the "Clear Cache" button (always try to be safe)
   Click the "Install the Update" button
   Popup: "ERROR: Invalid login"  (getting deja vu)
   Doesn't seem to be doing anything....
   Not seeing any recent posts about this....
3. This page offers three options:
   **************************************************************
   *** THIS DID NOT WORK - KEEPING FOR FUTURE REFERENCE ONLY  ***
   *** PLEASE SKIP TO STEP 4 AND IGNORE THIS MESS - THANK YOU ***
   **************************************************************
   https://docs.joomla.org/J3.x:Updating_Joomla_(Install_Method)
   They all assume I am using something like Go Daddy or CPanel
   Components -> Joomla Update
   Download zip file "Update package URL"
3.1 Unpack the zip file in /var/www/joomoowebsites.com/htdocs/unpack
   gojmh
   mkdir unpack
   cd unpack
   ls -altr ~/Downloads/
   mv ~/Downloads/Joomla_3.6.0-Stable-Update_Package.zip .
   cd ../../downloads/
   cp ../htdocs/unpack/Joomla_3.6.0-Stable-Update_Package.zip .
   cd -     # back to /var/www/joomoowebsites.com/htdocs/unpack
3.2 Install the new code
-> Trying Option 2: Install from Directory
   (Admin) -> Extensions -> Manage -> Install
   Install from folder (tab)
   Enter the following value for "Install folder:"
      /var/www/joomoowebsites.com/htdocs/unpack
   Get errors - with both the .zip file and with unzipped .zip file:
   ** Warning: JInstaller: :Install: Can't find XML setup file.
   ** Error: Path does not have a valid package.  Unable to find install package
-> Trying Option 3: Upload a Package File
   (Admin) -> Extensions -> Manage -> Install
   Upload Package File (tab)
   Browse - select downloaded file (Joomla_3.6.0-Stable-Update_Package.zip)
   Click the Upload and Install button
   ** Does not do anything except spin for a second or two max
-> Updated php.ini and fixed all warnings in:
   Extensions -> Manage -> Warnings
   ** Try Option 3 again! -> Same result
   ** Try Option 2 again! -> Same result (both zipped and unzipped)
-> Try Option 1: Install from URL
   Using URL from Components -> Joomla Update , i.e.:
      https://github.com/joomla/joomla-cms/releases/download/3.6.0/Joomla_3.6.0-Stable-Update_Package.zip
   Results: more errors!
   ** Warning: JInstaller: :Install: Can't find XML setup file.
   ** Error: Unable to find install package
   *******************************
   *** ABOVE STEP DID NOT WORK ***
   *** USING MANUAL PROCEDURE  ***
   *******************************
4. Fall back to manual procedure (as usual)
   See very bottom of this page:
      https://www.joomla.org/announcements/release-news/5666-the-joomla-3-6-1-update.html
   Refers to this page:
      https://gist.github.com/mbabker/d7bfb4e1e2fbc6b7815a733607f89281
   Process actually looks similar to what we did last time
4.1 Overview of preparatory steps (used last time and previously covered above)
   Check DB Schema: Extensions -> Manage -> Database
   Download Joomla_3.6.0-Stable-Update_Package.zip
   Fix permissions
4.2 A process similar to this worked last time:
   gojmj
   cp ../../downloads/Joomla_3.6.0-Stable-Update_Package.zip .
   unzip -o Joomla_3.6.0-Stable-Update_Package.zip
   rm Joomla_3.6.0-Stable-Update_Package.zip
   **************************
   *** DO NOT ACCESS SITE ***
   **************************
4.3 Now for the special script part - see URLs immediately above
   github gist: Download zip file from:
      https://gist.github.com/mbabker/d7bfb4e1e2fbc6b7815a733607f89281
   gojmh
   cp ~/Downloads/d7bfb4e1e2fbc6b7815a733607f89281-4f8bd9cfd2c54f853ca99bae3033586a81f9f236.zip ../downloads
   mkdir -p unpack/script/
   cp ../downloads/d7bfb4e1e2fbc6b7815a733607f89281-4f8bd9cfd2c54f853ca99bae3033586a81f9f236.zip unpack/script/
   cd unpack/script/
   unzip d7bfb4e1e2fbc6b7815a733607f89281-4f8bd9cfd2c54f853ca99bae3033586a81f9f236.zip
   l d7bfb4e1e2fbc6b7815a733607f89281-4f8bd9cfd2c54f853ca99bae3033586a81f9f236
   cp d7bfb4e1e2fbc6b7815a733607f89281-4f8bd9cfd2c54f853ca99bae3033586a81f9f236/postupdate.php ../../joomoowebsites.com
   gojmj
   mv postupdate.php administrator
4.4 Run the postupdate.php script, then remove it:
   Run it in the browser:
      jane.joomoowebsites.com/administrator/postupdate.php
   Response:
      "Update to 3.6.0 completed successfully."
   gojmj
   rm administrator/postupdate.php
4.5 Check:
   Extensions -> Manage -> Database
      "Database table structure is up to date."
   System -> System Information
      Joomla Version: 3.6.0
5. Upgrade to 3.6.2
   Note: now at 3.6.0, still need to upgrade to 3.6.2
5.1 Commit code and backup database
   gojmj
   git add --all
   gs
   gc 'Upgraded to 3.6.0.' ; gpom
   bu jm 02-before_upgrading_3.6.0_to_3.6.2
5.2 Which to use?
   Option 1: found via joomla.org/download.html:
      Joomla_3.6.x_to_3.6.2-Stable-Patch_Package.zip
   Option 2: found via Admin -> Components -> Joomla Update (-> 1st tab: Live Update)
      Joomla_3.6.2-Stable-Update_Package.zip
-> Picking option 2:
   gojmh
   cd downloads
   mv ~/Downloads/Joomla_3.6.2-Stable-Update_Package.zip .
5.3 Trying the second tab on the page:
      Components -> Joomla Update -> 2nd tab: Upload and Update
   Maybe it is the firewall that is causing the update to fail?
   Apparently not.
   Results:
   ** No error messages, does not upgrade **
5.4 Oops forgot to update the plugin!
   Extensions -> Manage -> Update
   Click the "Clear Cache" button
   Click the "Find Updates" button
   Check the "Installer - Install from Web" checkbox
   Click the "Update" button
   Results - 1st attempt:
      Copy failed:
         /var/www/joomoowebsites.com/htdocs/joomoowebsites.com/tmp/install_57c4ea4a2a024/admin/access.xml to
         /var/www/joomoowebsites.com/htdocs/joomoowebsites.com/administrator/components/com_joomlaupdate/access.xml
      JInstaller: :Install: Failed to copy file
         /var/www/joomoowebsites.com/htdocs/joomoowebsites.com/tmp/install_57c4ea4a2a024/admin/access.xml to
         /var/www/joomoowebsites.com/htdocs/joomoowebsites.com/administrator/components/com_joomlaupdate/access.xml
      Component Update: Failed to copy administrator files.
      Message: Error updating component.
   No files in /var/www/joomoowebsites.com/htdocs/joomoowebsites.com/tmp
   chmod 777 /var/www/joomoowebsites.com/htdocs/joomoowebsites.com/tmp
   Retry - same results
   *********************
   *** Well crap.... ***
   *********************
5.5 When will I learn to:
-> Skip the backend folderol and just go with downloading and unzipping the update package?
   But: will it still work without the plugin that I could not install in step 5.4?
   gojmj
   cp ../../downloads/Joomla_3.6.2-Stable-Update_Package.zip .
   unzip -o Joomla_3.6.2-Stable-Update_Package.zip
   rm Joomla_3.6.2-Stable-Update_Package.zip
   Run the post update script from:
      https://gist.github.com/mbabker/d7bfb4e1e2fbc6b7815a733607f89281
   Download a zip of the gist
   gojmh
   mv ~/Downloads/d7bfb4e1e2fbc6b7815a733607f89281-4f8bd9cfd2c54f853ca99bae3033586a81f9f236.zip unpack/
   cd unpack/
   unzip d7bfb4e1e2fbc6b7815a733607f89281-4f8bd9cfd2c54f853ca99bae3033586a81f9f236.zip
   cp d7bfb4e1e2fbc6b7815a733607f89281-4f8bd9cfd2c54f853ca99bae3033586a81f9f236/postupdate.php ~/tmp
   gojmj
   mv ~/tmp/postupdate.php administrator/
5.6 Run the postupdate.php script, then remove it:
   Run it in the browser:
      jane.joomoowebsites.com/administrator/postupdate.php
   Response:
      "Update to 3.6.2 completed successfully."
   gojmj
   rm administrator/postupdate.php
5.7 Check:
   Extensions -> Manage -> Database
      "Database table structure is up to date."
   System -> System Information
      Joomla Version: 3.6.2
6. Backup and cleanup
   gojmj
   git add --all
   gs
   gc 'Upgraded to 3.6.2.' ; gpom
   bu jm 03-after_upgrading_3.6.0_to_3.6.2
   tarHome
6.1 Replace hard copy of configuration.php with link.
   diff configuration.php ../gitignored/configuration.php
   rm configuration.php ; ln -s ../gitignored/configuration.php .
   ls -al
   cd ../gitignored/
   rd configuration.php
   ci -l configuration.php
7. Note: Updating barbara (also running Ubuntu 16.04), the new server, only


**************************************************
OLD - Copied for Possible Reference This Time Only
**************************************************
WHEN DONE WITH MOST RECENT UPGRADE,
PLEASE DELETE FROM HERE THROUGH UPDATE TO 3.5.1
BECAUSE THIS IS ALL A DUPLICATION OF THAT
**************************************************

Upgrading New Production host:
--------------------------
1. Backup DB and pull the code:
   bu j  01-before_upgrade          # IF NOT DONE ALREADY, DO IT NOW
   cd joomoowebsites.com
   git pull
2. Test in browswer
   ### Test front end in browser
   ###    e.g., Check articles with images
   ### Test back end in browser,
   ###    e.g., System Information -> System Information (check version) and -> Folder Permissions
3. Backup DB and we are done:
   bu j  02-after_upgrade



######################################################################
*** OLD *** Process Used for Upgrading from 3.4.8 to 3.5.1 *** OLD ***
######################################################################

NOTE:
-----
NOT bothering with trying to upgrade via the admin panel this go around.

Using Recommended Manual Procedure - 3.4.8 to 3.5.1:
----------------------------------------------------
Rather than downloading a fresh install, following the procedure given here:
    https://docs.joomla.org/J3.x:Upgrading_from_Joomla_3.4.x_to_3.5
It appears there are some major changes so it would be best to follow this procedure.

Doing this on bette first (upgraded jane to 16.04 and it is not working right now).

0. Always backup DB and ensure code matches what is in github ("Before You Start" above)
1. Fix DB:
   *** "Fix" DB from last time: Extensions -> Manage -> Database
   *** Warning: Database is not up to date!
   *** Database update version (3.4.3) does not match CMS version (3.4.8).
   -> Click on "Fix" in the upper left corner
   bu jm 02-after_fixing_db
2. Download Joomla_3.5.1-Stable-Update_Package.zip into /var/www/joomoowebsites.com/downloads
   gojmj
   cp ../downloads/Joomla_3.5.1-Stable-Update_Package.zip tmp
3. Fix permissions:
   See: System -> System Information -> Folder Permissions
      http://bette.joomoowebsites.com/administrator/index.php?option=com_admin&view=sysinfo
   [Copy/Paste -> awk -> chmod_dirs.sh]
4. Following Method A at the URL listed above:
   Components -> Joomla Update
   Write Files Directly -> Install the Update
   *** Pop-up: "Error: Invalid login"
   *** Acts like it is working but I suspect it is not
5. Following Method B at the URL listed above:
   *** Make sure that the joomoowebsites.com directory is not a link ***
   *** (We tried with it being a link and the site whitescreened.)   ***
   gojm
   ls -al
   rm joomoowebsites.com  // assuming it is a link
   mv joomoowebsites.com-3.4.8 joomoowebsites.com
   cd joomoowebsites.com
   cp ../../downloads/Joomla_3.5.1-Stable-Update_Package.zip .
   unzip -o Joomla_3.5.1-Stable-Update_Package.zip
   rm Joomla_3.5.1-Stable-Update_Package.zip
      Fix DB: Extensions -> Manage -> Database
      -> Click on "Fix" in the upper left corner
   Discover and install Core Extensions:
      Extensions -> Manage -> Discover
      -> Select all core extensions and click on "Install" in the upper left corner
   System → Clear Cache and if any rows are shown, select them and click the Delete
   bu jm 02-after_fixing_db


************** TBD ************

2. Copy over the images and switch the link
   gojmj
   tar -cvzf images_joomoowebsites.com.tgz images/joomoowebsites.com/
   cd ..
   mv  joomoowebsites.com-3.4.5/images_joomoowebsites.com.tgz joomoowebsites.com-3.4.8
   cd joomoowebsites.com-3.4.8
   l images                        # should be no subdirectory named joomoowebsites.com !
   tar -xvzf images_joomoowebsites.com.tgz
   rm images_joomoowebsites.com.tgz
   l images/joomoowebsites.com/    # should see a few subdirectories now
   rm joomoowebsites.com  # assuming it's a link to 3.4.5!
   ln -s joomoowebsites.com-3.4.8 joomoowebsites.com
3. Update the new directory tree with a copy of the git files, and remove installation directory
   gojmj
   cp -r ../joomoowebsites.com-3.4.5/.git* .   # bwahahah
   rm -fr installation/
   bu j  01-before_upgrade          # IF NOT DONE ALREADY, DO IT NOW
4. Update the new directory tree with a link to the configuration file and link in subsites and customizations
   gojmj
   ln -s ../gitignored/configuration.php .
   lnSubsites
   cd ..
   lnJoomlaCustomizations
   cd -
   l modules/ templates/    # should see links to my customizations
   l language/en-GB/        # should see links to my customizations
5. Fix Permissions and Test All the Things!
   gojmj
   sudo chown -R www-data:tomh .
   ### Test front end in browser
   ###    e.g., Check articles with images
   ### Test back end in browser,
   ###    e.g., System Information -> System Information (check version) and -> Folder Permissions
6. Commit the changes and push to github
   git status
   git add --all
   gc 'Updated to 3.4.8.' ; git push origin master
7. Backup the DB and we are done!
   bu j  02-after_upgrade

Upgrading backup host:
----------------------
We have a bit of a history of versions on bette, but have just started it on jane.
So rather than start from scratch or something, for shitz and gigglez, this time around,
ran these somewhat unlikely commands to upgrade bette, enabling us to keep the history
and use it for the main procedure, if we want to, next time.
1. Upgrade bette using github, keeping version 3.4.5 around for historical and consistency purposes:
   tar -cvzf joomoowebsites.com-3.4.5.tgz joomoowebsites.com-3.4.5/
   mkdir unpack
   mv joomoowebsites.com-3.4.5.tgz unpack/
   cd unpack/
   tar -xvzf  joomoowebsites.com-3.4.5.tgz
   mv joomoowebsites.com-3.4.5 joomoowebsites.com-3.4.8    # bwahahahah
   rm joomoowebsites.com-3.4.5.tgz
   cd joomoowebsites.com-3.4.8/
   git pull   # get core upgrade changes checked in on jane
   cd ../..
   mv unpack/joomoowebsites.com-3.4.8 .
   l
   rm joomoowebsites.com ; ln -s joomoowebsites.com-3.4.8 joomoowebsites.com ; ls -al
2. Check links and images
   gojmj
   l modules/ templates/           # ensure there are links to my customizations
   l language/en-GB/               # ensure there are links to my customizations
   l images/joomoowebsites.com/    # ensure there are a few subdirectories
3. Fix Permissions and Test All the Things!
   gojmj
   sudo chown -R www-data:tomh .
   ### Test front end in browser
   ###    e.g., Check articles with images
   ### Test back end in browser,
   ###    e.g., System Information -> System Information (check version) and -> Folder Permissions
4. Backup the DB and we are done!
   bu j  02-after_upgrade

Upgrading Production host:
--------------------------
1. Backup DB and pull the code:
   bu j  01-before_upgrade          # IF NOT DONE ALREADY, DO IT NOW
   cd joomoowebsites.com
   git pull
2. Test in browswer
   ### Test front end in browser
   ###    e.g., Check articles with images
   ### Test back end in browser,
   ###    e.g., System Information -> System Information (check version) and -> Folder Permissions
3. Backup DB and we are done:
   bu j  02-after_upgrade

######################################################################
*** OLD *** Process Used for Upgrading from 3.4.5 to 3.4.8 *** OLD ***
######################################################################

Fall Back to Tried and True Manual Procedure - 3.4.5 to 3.4.8:
--------------------------------------------------------------
Doing this on jane today.
0. Always backup DB and ensure code matches what is in github ("Before You Start" above)
1. Download zip into /var/www/joomoowebsites.com/downloads and unpack
   gojmh
   mkdir unzip
   cp ../downloads/Joomla_3.4.8-Stable-Full_Package.zip unzip
   cd unzip
   unzip Joomla_3.4.8-Stable-Full_Package.zip
   rm Joomla_3.4.8-Stable-Full_Package.zip
   cd ..
   mv unzip joomoowebsites.com-3.4.8
2. Copy over the images and switch the link
   gojmj
   tar -cvzf images_joomoowebsites.com.tgz images/joomoowebsites.com/
   cd ..
   mv  joomoowebsites.com-3.4.5/images_joomoowebsites.com.tgz joomoowebsites.com-3.4.8
   cd joomoowebsites.com-3.4.8
   l images                        # should be no subdirectory named joomoowebsites.com !
   tar -xvzf images_joomoowebsites.com.tgz
   rm images_joomoowebsites.com.tgz
   l images/joomoowebsites.com/    # should see a few subdirectories now
   rm joomoowebsites.com  # assuming it's a link to 3.4.5!
   ln -s joomoowebsites.com-3.4.8 joomoowebsites.com
3. Update the new directory tree with a copy of the git files, and remove installation directory
   gojmj
   cp -r ../joomoowebsites.com-3.4.5/.git* .   # bwahahah
   rm -fr installation/
   bu j  01-before_upgrade          # IF NOT DONE ALREADY, DO IT NOW
4. Update the new directory tree with a link to the configuration file and link in subsites and customizations
   gojmj
   ln -s ../gitignored/configuration.php .
   lnSubsites
   cd ..
   lnJoomlaCustomizations
   l modules/ templates/    # should see links to my customizations
   l language/en-GB/        # should see links to my customizations
5. Fix Permissions and Test All the Things!
   gojmj
   sudo chown -R www-data:tomh .
   ### Test front end in browser
   ###    e.g., Check articles with images
   ### Test back end in browser,
   ###    e.g., System Information -> System Information (check version) and -> Folder Permissions
6. Commit the changes and push to github
   git status
   git add --all
   gc 'Updated to 3.4.8.' ; git push origin master
7. Backup the DB and we are done!
   bu j  02-after_upgrade

Upgrading backup host:
----------------------
We have a bit of a history of versions on bette, but have just started it on jane.
So rather than start from scratch or something, for shitz and gigglez, this time around,
ran these somewhat unlikely commands to upgrade bette, enabling us to keep the history
and use it for the main procedure, if we want to, next time.
1. Upgrade bette using github, keeping version 3.4.5 around for historical and consistency purposes:
   tar -cvzf joomoowebsites.com-3.4.5.tgz joomoowebsites.com-3.4.5/
   mkdir unpack
   mv joomoowebsites.com-3.4.5.tgz unpack/
   cd unpack/
   tar -xvzf  joomoowebsites.com-3.4.5.tgz
   mv joomoowebsites.com-3.4.5 joomoowebsites.com-3.4.8    # bwahahahah
   rm joomoowebsites.com-3.4.5.tgz
   cd joomoowebsites.com-3.4.8/
   git pull   # get core upgrade changes checked in on jane
   cd ../..
   mv unpack/joomoowebsites.com-3.4.8 .
   l
   rm joomoowebsites.com ; ln -s joomoowebsites.com-3.4.8 joomoowebsites.com ; ls -al
2. Check links and images
   gojmj
   l modules/ templates/           # ensure there are links to my customizations
   l language/en-GB/               # ensure there are links to my customizations
   l images/joomoowebsites.com/    # ensure there are a few subdirectories
3. Fix Permissions and Test All the Things!
   gojmj
   sudo chown -R www-data:tomh .
   ### Test front end in browser
   ###    e.g., Check articles with images
   ### Test back end in browser,
   ###    e.g., System Information -> System Information (check version) and -> Folder Permissions
4. Backup the DB and we are done!
   bu j  02-after_upgrade

Upgrading Production host:
--------------------------
1. Backup DB and pull the code:
   bu j  01-before_upgrade          # IF NOT DONE ALREADY, DO IT NOW
   cd joomoowebsites.com
   git pull
2. Test in browswer
   ### Test front end in browser
   ###    e.g., Check articles with images
   ### Test back end in browser,
   ###    e.g., System Information -> System Information (check version) and -> Folder Permissions
3. Backup DB and we are done:
   bu j  02-after_upgrade

##########################################################################
*** OLD OLD OLD *** FOR POSSIBLE FUTURE REFERENCE ONLY *** OLD OLD OLD ***
##########################################################################

Introduction
------------
The process seems to change about the time I get used to it and acheive a comfortable level of automation and documentation.
Plus we don't run it often enough to be really confident about it or good at it etc.
If the download button doesn't work it is probably because of my firewall or there is something missing in my configuration, or both.
Moreover, I feel it's best to fall back on the tried and true command line methods, so I know what's going on in the event of a problem.
This could back fire though, I suppose, in the event of changes to the structure of the db.  Hmmm.
So we save the old code and db, just in case we need to back up and problem solve....

JooMooWebSites.com - Upgrading Notes for 2015
---------------------------------------------
1. Download zip, e.g. for 3.4.5 and unpack
2. cd joomoowebsites.com
   tar -cvzf images_joomoowebsites.com.tgz images/joomoowebsites.com/
   cd ..
   mv  joomoowebsites.com-3.4.3/images_joomoowebsites.com.tgz joomoowebsites.com-3.4.5
   rm joomoowebsites.com  # assuming it's a link to 3.4.3!
   ln -s joomoowebsites.com-3.4.5 joomoowebsites.com
3. cd joomoowebsites.com
   cp -r ../joomoowebsites.com-3.4.3/.git* .   # bwahahah
   ln -s ../gitignored/configuration.php .
   bu j  01-before_upgrade # aliased to dbMySqlBackup
4. rm -fr installation/
   cd ..
   ln_joomla_customizations
   ln_subsites
5. Test front end in browser
   Test back end in browser
6. cd joomoowebsites.com
   gs
   ga .
   gc 'Updated to 3.4.5' ; gpom
   bu j  02-after_upgrade # aliased to dbMySqlBackup
7. On backup and production hosts:
   bu j  01-before_upgrade # aliased to dbMySqlBackup
   cd joomoowebsites.com
   git pull
   test in browswer
   bu j  02-after_upgrade # aliased to dbMySqlBackup

