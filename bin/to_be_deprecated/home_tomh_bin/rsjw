#!/bin/bash
#
# rsjw: restore joomla db used by joomla_work
# --------------------------------------------
#
function syntax()
{
   echo "Syntax:"
   echo "  rsjw [joomla_work-YYYY_MM_DD.sql.gz]"
   echo "    If specified, input file [joomla_work-YYYY_MM_DD.sql.gz] must be in the current directory"
}

if [ -z "$1" ]; then
   syntax
   exit 1
else
  file_name=$1
fi

db_name=joomla_work 

echo "pwd: $(pwd)"
echo "file_name: $file_name"

## echo -n "Enter y to restore $db_name DB from $file_name: "
## read answer
## if [ "$answer" != "y" ]; then
##    echo 'Ok, then!'
##    exit 5
## fi

if [ -f $file_name ]; then
   echo "Restoring $db_name DB from $file_name ..."
else
   syntax
   echo
   echo "Error: input file \"$file_name\" does not exist"
   exit 1
fi

gunzip < $file_name | mysql -u root -p $db_name

echo "... done."
