
 Get LAMP Sites Running
========================
LAMP as in LAM-PHP.  We do Python separately.

Ensure Required LAMP Packages Are Installed
-------------------------------------------
Many if not most or all of these LAMP packages have been already installed
[ ] Install as necessary, and ensure the installed versions of these packages match on:
    [ ] ava
    [ ] barbara
    [ ] jane
    Commands (as root):
      dpkg-query -l 'package_name_or_regex'   ## if it's not found, it needs to be installed
      apt-get install -s package_name         ## Simulate installation
      apt-get install -y package_name         ## Do it without requesting confirmation
    Install apache2, apache2-utils, apache2-dev (needed for wsgi)
    Install libapache2-mod-php7.0
    Install php7.0, php7.0-gd, php7.0-mysql, php7.0-mcrypt
    Install mysql-server

Populate /var/www
-----------------
[ ] Get all websites' source files in /var/www
    artsyvisions.com:
      best to use a tar file
    github_pages:
      mkdir -p github_pages/customizations
      cd github_pages/customizations
      git clone git@github.com:JoomooWebsites/joomoowebsites.github.io.git
      git clone git@github.com:tomwhartung/tomwhartung.github.io.git
      cd -
    groja.com:
      mkdir -p groja.com/htdocs
      cd groja.com/htdocs
      git clone git@github.com:tomwhartung/groja.com.git
      cd -
    jmws_accoutrements:
      git clone git@github.com:tomwhartung/jmws_accoutrements.git
    joomoowebsites.com:
      best to use a tar file (copy from barbara; bette has more files e.g., downloads dir.)
    seeourminds.com:
      mkdir -p seeourminds.com/htdocs/
      cd seeourminds.com/htdocs/
      git clone git@github.com:tomwhartung/seeourminds.com.git
      cd -
    subsites:
      mkdir subsites
      cd subsites
      git clone git@github.com:tomwhartung/resume.git
      git clone git@github.com:tomwhartung/idMyGadget.git
      cd -
    tomhartung.com:
      ** COME BACK TO THIS LATER **
      -> Get it working on barbara, then copy only essential code to ava and jane
      For now: add only a placeholder html file to the DocumentRoot directory
      mkdir -p tomhartung.com/htdocs/tomhartung.com
      vi tomhartung.com/htdocs/tomhartung.com/index.html
    tomh.info
      best to use a tar file
    tomwhartung.com:
      ** COME BACK TO THIS LATER **
      -> Ensure it works on barbara, then copy only essential code to ava and jane
      For now: add only a placeholder html file to the DocumentRoot directory
      mkdir -p tomwhartung.com/htdocs/tomhartung.com
      vi tomwhartung.com/htdocs/tomhartung.com/index.html

Disk Space Spotcheck
--------------------
[ ] Disk Space Spotcheck:
    /:        1.8G/22G (9%)
    /home:    257M/4.5G (6%)
    /var/www: 8.1G/20G (45%)
[ ] NOTE: if we need space in /var/www, we can delete files in:
      /var/www/zzz-tar_files-old

Configure Apache
----------------
[ ] Add and update config files in /etc/apache2/sites-available as appropriate
    As root:
      cd /etc/apache2/sites-available
      mkdir RCS
      ci -l *.conf   ## "Installed version"
    For best results, copy conf files from another host and check in to RCS
    Fix ServerAlias specifications in apache2/sites-available/*.conf files
    As root:
      ci -l *.conf   ## "Copied from host xxxxx and updated for this host"
[ ] Enable mod_rewrite and php7.0, and start apache2 (as root):
    As root:
      cd /etc/apache2
      ls -al mods-*/rewrite*
      ls -al mods-*/php7.0*
      ls -al mods-*/mpm*
    If not enabled (or disabled, as in the case of mpm_event),
      run one or more of these commands as appropriate:
    As root:
      a2enmod rewrite
      a2enmod php7.0
      a2dismod mpm_event
      a2enmod mpm_prefork
      service apache2 stop
      service apache2 start

Ensure Static Sites Work
------------------------
[ ] artsyvisions.com
[ ] tomh.info

Finding the Right Copy of the Database
--------------------------------------
[ ] Databases used on barbara:
    groja.com & seeourminds.com:
      try using current db from lauren:
        seeourminds.com-2016_07_16-lauren.sql.gz
      try using current db from bette:
        seeourminds.com-2016_07_16-bette.sql.gz
    joomoowebsites.com: using db from bette (version 3.5.1)
        joomoowebsites.com-2016_07_16-bette-02-mobile_detect.sql.gz
    tomhartung.com: using db from bette
        tomwhartung.com-2016_07_16-bette.sql.gz

Ensure WordPress Sites Work
---------------------------
[ ] Create and restore databases: see database_checklist.txt
[ ] Get sites running: see site_checklist.txt
[ ] Configure wordpress updates

Ensure Joomla Site Works
-------------------------
[ ] Create and restore database: see database_checklist.txt
[ ] Get site running: see site_checklist.txt
[ ] For joomla on a fresh install of 16.04, install simplexml:
    Check for it in phpinfo.php
       sudo apt-get install php7.0-simplexml
       sudo service apache2 restart
    Reference: http://forum.joomla.org/viewtopic.php?t=916040

Ensure Drupal Site Works
------------------------
[ ] Create and restore database: see database_checklist.txt
[ ] Get sites running: see site_checklist.txt

Back It All Up
--------------
[ ] Ensure we have backups of everything, including a copy for off-site
[ ] Set up backups

[ ] Disk Space Spotcheck:
      /:     
      /home: 
      /var/www: X.XG/XXG (XX%)

